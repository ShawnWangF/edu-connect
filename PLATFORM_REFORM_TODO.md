# EduConnect 平台改造 TODO 清單

基於《平台改造方向與功能規劃報告》，本清單嚴格按照報告中的優先級和實施階段制定。

---

## 📊 實施進度總覽

### 第一階段（核心基礎）- 已完成 ✅
- [x] 引入「項目」層級架構
- [x] 實現多團組日曆矩陣（CalendarMatrix）
- [x] 實現基礎資源衝突檢測
- [x] 創建項目管理頁面（ProjectList + ProjectDetail）
- [x] 導入測試數據（10月江蘇交流團）

### 第二階段（資源管理）- 部分完成 🟡
- [x] 創建資源庫基礎架構（restaurants、schools表）
- [x] 實現資源庫UI（ResourceLibrary.tsx）
- [x] 創建行程模板基礎功能（Templates.tsx）
- [ ] 實現學校交流管理
- [ ] 完善資源庫約束規則（開放時間、休館日）
- [ ] 實現模板套用功能

### 第三階段（智能調度）- 未開始 ⭕
- [ ] 實現統籌人員調度系統
- [ ] 實現預約管理系統
- [ ] 實現智能排程建議

---

## 🎯 按優先級分類的待辦事項

### P0 - 核心功能（必須實現）

#### 模塊一：項目管理
- [x] 項目創建功能
- [x] 項目儀表盤（顯示項目下所有團組的狀態概覽）
- [x] 多團組日曆矩陣（復刻Excel「行程儀表盤」）
- [x] 資源衝突檢測（自動標紅同一景點/餐廳在同一時段被多個團組佔用）
- [ ] 項目統計優化（總人數、團組數、景點覆蓋率、餐廳使用率）

#### 模塊二：資源庫管理
- [x] 景點庫基礎功能（名稱、地址、容量限制）
- [x] 餐廳庫基礎功能（名稱、地址、容量、聯繫方式）
- [x] 學校庫基礎架構
- [x] **景點庫schema擴展**：添加開放時間、休館日、是否需預約、對接人字段
- [x] **景點庫UI完善**：在ResourceLibrary中添加新字段的編輯功能
- [x] **餐廳庫schema擴展**：添加菜系、價格區間、營業時間、特色菜品字段
- [x] **餐廳庫UI完善**：在ResourceLibrary中添加新字段的編輯功能
- [x] **學校庫schema擴展**：添加schoolType、maxGroupSize字段
- [x] **學校庫UI完善**：在ResourceLibrary中添加新字段的編輯功能
- [ ] **場館約束規則**：自動根據休館日、開放時間提示排程衝突

#### 模塊三：行程模板- [x] 模板創建功能（從現有團組保存為模板）
- [x] 模板預覽功能
- [x] **模板套用API**：applyTemplate API已實現
- [ ] **模板套用UI**：在GroupNew中添加模板選擇器框架
- [ ] **模板調整功能**：套用後可針對具體團組微調行程

#### 模塊四：預約管理
- [ ] **預約時段管理**：為需預約場館設定可用時段，分配給不同團組
- [ ] **預約衝突檢測**：自動檢測同一時段是否超出場館容量
- [ ] 預約狀態追蹤（待確認/已確認/已取消）

#### 模塊六：學校交流管理
- [ ] **學校配對功能**：為每個團組匹配香港學校 + 澳門學校
- [ ] **交流詳情記錄**：記錄交流日期、時段、接待流程、聯繫方式
- [ ] 交流狀態管理（待確認/已確認/已完成）

#### 模塊七：現有功能優化（P0級別）
- [x] 團組管理歸屬到項目下
- [ ] **行程時間軸優化**：增加上午/下午時段劃分，支持從資源庫選擇景點
- [ ] **食行卡片升級**：升級為項目級餐飲統籌視圖，顯示所有團組的餐飲安排
- [x] **批量添加行程點**：選擇日期後批量添加多個行程點

---

### P1 - 重要功能（應該實現）

#### 模塊一：項目管理
- [ ] 項目統計詳細報表（景點覆蓋率、餐廳使用率等）

#### 模塊二：資源庫管理
- [ ] 場館約束規則完善（自動根據休館日、開放時間提示排程衝突）
- [ ] 學霸分享會管理（管理分享會的時間、地點、學段、分享人）

#### 模塊三：行程模板
- [ ] 預約狀態追蹤功能完善

#### 模塊五：統籌人員調度
- [ ] **人員管理**：添加統籌人員，設定角色（領隊/接機/學校對接等）
- [ ] **任務分配**：為每位統籌人員分配每天跟進的團組和具體任務
- [ ] **甘特圖視圖**：以甘特圖形式展示所有統籌人員的時間安排

#### 模塊六：學校交流管理
- [ ] 交流狀態管理完善

#### 模塊七：現有功能優化（P1級別）
- [ ] 行程設計器增強（增加拖拽排程、衝突提示、模板套用）
- [ ] 導出功能增強（增加按項目導出完整統籌文檔）

---

### P2 - 可選功能（有時間再實現）

#### 模塊二：資源庫管理
- [ ] 資源使用統計（每個資源被多少團組使用、使用頻率）

#### 模塊三：行程模板
- [ ] 模板版本管理（保存歷史版本，支持回溯）

#### 模塊五：統籌人員調度
- [ ] 任務提醒（每日任務提醒，避免遺漏）

#### 模塊六：學校交流管理
- [ ] 學校歷史記錄（記錄每所學校的歷次交流記錄）

---

## 📋 詳細實施清單（按模塊分類）

### 模塊一：項目管理（Project Management）

#### 已完成 ✅
- [x] 創建projects表（projectId, name, description, startDate, endDate, totalGroups, totalPeople, status, createdAt, updatedAt）
- [x] 修改groups表，添加projectId外鍵關聯
- [x] 實現完整的項目管理API（create/list/get/update/delete/getGroups）
- [x] 創建ProjectList頁面（項目列表和創建）
- [x] 創建ProjectDetail頁面（項目詳情和統計）
- [x] 實現CalendarMatrix組件（多團組日曆矩陣視圖）
- [x] 實現資源衝突檢測（同一地點同一時段被多個團組佔用時紅色標記）
- [x] 更新側邊欄導航，添加「項目總覽」入口

#### 待完成 ⭕
- [ ] 優化項目統計功能
  - [ ] 添加景點覆蓋率統計（項目中使用的景點數 / 資源庫中總景點數）
  - [ ] 添加餐廳使用率統計（項目中使用的餐廳數 / 資源庫中總餐廳數）
  - [ ] 添加衝突率統計（有衝突的時段數 / 總時段數）
  - [ ] 添加資源熱力圖（哪些景點/餐廳被使用最多）

---

### 模塊二：資源庫管理（Resource Library）

#### 已完成 ✅
- [x] 創建restaurants表（基礎字段：name, address, phone, capacity）
- [x] 創建schools表（基礎字段：name, address, phone, region）
- [x] 實現restaurants和schools的CRUD API
- [x] 創建ResourceLibrary.tsx頁面，整合景點、餐廳、學校資源
- [x] 實現Tab式佈局和搜索功能
- [x] 更新側邊欄，將「資源管理」改為「資源庫」

#### 待完成 ⭕

##### 2.1 景點庫完善（P0）
- [ ] 擴展attractions表schema
  - [ ] 添加openingHours字段（JSON格式，存儲每週開放時間）
  - [ ] 添加closedDays字段（JSON數組，存儲休館日期）
  - [ ] 添加requiresBooking字段（boolean，是否需要預約）
  - [ ] 添加bookingLeadTime字段（integer，提前預約天數）
  - [ ] 添加contactPerson字段（對接人姓名）
  - [ ] 添加contactPhone字段（對接人電話）
  - [ ] 添加specialNotes字段（特殊說明，如「太空館逢二休」）
- [ ] 更新attractions的CRUD API以支持新字段
- [ ] 更新ResourceLibrary.tsx的景點Tab
  - [ ] 添加開放時間設置UI（週一至週日的開放時段）
  - [ ] 添加休館日設置UI（支持選擇特定日期或週期性休館）
  - [ ] 添加預約要求設置UI（是否需預約、提前天數）
  - [ ] 添加對接人信息UI
- [ ] 實現場館約束規則檢測
  - [ ] 在行程點創建/編輯時，檢查選擇的日期是否為休館日
  - [ ] 檢查選擇的時間是否在開放時間內
  - [ ] 如果需要預約，檢查是否滿足提前預約天數要求
  - [ ] 顯示約束衝突警告，並建議替代方案

##### 2.2 餐廳庫完善（P0）
- [ ] 擴展restaurants表schema
  - [ ] 添加cuisine字段（菜系，如粵菜、川菜、西餐）
  - [ ] 添加priceRange字段（價格區間，如「50-100元/人」）
  - [ ] 添加businessHours字段（營業時間）
  - [ ] 添加specialties字段（招牌菜）
- [ ] 更新restaurants的CRUD API以支持新字段
- [ ] 更新ResourceLibrary.tsx的餐廳Tab
  - [ ] 添加菜系選擇器
  - [ ] 添加價格區間輸入
  - [ ] 添加營業時間設置
  - [ ] 添加招牌菜輸入
- [ ] 實現餐廳容量衝突檢測
  - [ ] 在食行卡片選擇餐廳時，顯示該餐廳當日已被哪些團組預訂
  - [ ] 計算當日總預訂人數，如果超過餐廳容量則顯示紅色警告
  - [ ] 在項目級餐飲統籌視圖中，用顏色深淺表示餐廳負載程度

##### 2.3 學校庫完善（P0）
- [ ] 擴展schools表schema
  - [ ] 添加contactPerson字段（聯繫人姓名）
  - [ ] 添加contactPhone字段（聯繫人電話）
  - [ ] 添加contactEmail字段（聯繫人郵箱）
  - [ ] 添加receptionProcess字段（接待流程說明）
  - [ ] 添加availableTimeSlots字段（JSON格式，可交流時段）
  - [ ] 添加schoolType字段（學校類型：小學/中學/大學）
  - [ ] 添加maxGroupSize字段（最大接待團組人數）
- [ ] 更新schools的CRUD API以支持新字段
- [ ] 更新ResourceLibrary.tsx的學校Tab
  - [ ] 添加聯繫人信息UI（姓名、電話、郵箱）
  - [ ] 添加接待流程說明輸入框
  - [ ] 添加可交流時段設置UI（週一至週日的可用時段）
  - [ ] 添加學校類型選擇器
  - [ ] 添加最大接待人數輸入

##### 2.4 資源使用統計（P2）
- [ ] 創建資源使用統計API
  - [ ] 統計每個景點被多少團組使用
  - [ ] 統計每個餐廳被多少團組使用
  - [ ] 統計每個學校被多少團組使用
  - [ ] 計算使用頻率排名
- [ ] 在ResourceLibrary頁面添加統計視圖
  - [ ] 顯示最受歡迎的景點/餐廳/學校
  - [ ] 顯示使用頻率圖表

---

### 模塊三：行程模板（Itinerary Templates）

#### 已完成 ✅
- [x] 創建templates表（id, name, description, days, applicableTypes, isActive）
- [x] 創建templateItineraries表（id, templateId, dayNumber, timeSlot, locationId, locationName, startTime, endTime, description, notes）
- [x] 實現模板CRUD API（create/list/get/delete）
- [x] 創建Templates.tsx頁面
- [x] 實現從現有團組保存為模板功能
- [x] 實現模板預覽功能（顯示完整行程列表）
- [x] 更新側邊欄，添加「行程模板」入口

#### 待完成 ⭕

##### 3.1 模板套用功能（P0）
- [ ] 在GroupNew.tsx（團組創建頁面）添加模板選擇器
  - [ ] 添加「選擇行程模板」下拉菜單
  - [ ] 根據團組類型（小學/中學）過濾可用模板
  - [ ] 顯示模板預覽（天數、行程點數）
- [ ] 實現模板套用API
  - [ ] 創建 `templates.apply` API
  - [ ] 輸入：templateId, groupId, startDate
  - [ ] 邏輯：
    1. 讀取模板的所有templateItineraries
    2. 根據團組的startDate計算每個行程點的實際日期
    3. 批量創建itineraries記錄，關聯到新團組
    4. 返回創建的行程點數量
- [ ] 在團組創建成功後，如果選擇了模板，自動調用套用API
- [ ] 在團組詳情頁顯示「來自模板：XXX」標記

##### 3.2 模板調整功能（P0）
- [ ] 套用模板後，允許用戶在團組詳情頁微調行程
  - [ ] 修改行程點的時間
  - [ ] 修改行程點的地點
  - [ ] 添加新的行程點
  - [ ] 刪除不需要的行程點
- [ ] 在團組詳情頁添加「重置為模板」按鈕
  - [ ] 點擊後清空當前行程，重新套用模板
  - [ ] 顯示確認對話框，防止誤操作

##### 3.3 模板版本管理（P2）
- [ ] 擴展templates表schema
  - [ ] 添加version字段（版本號）
  - [ ] 添加parentTemplateId字段（父模板ID，用於版本追溯）
- [ ] 實現模板版本API
  - [ ] 創建新版本（基於現有模板）
  - [ ] 查詢模板的所有版本
  - [ ] 回溯到歷史版本
- [ ] 在Templates頁面添加版本管理UI
  - [ ] 顯示模板的版本歷史
  - [ ] 支持查看和恢復歷史版本

---

### 模塊四：預約管理（Booking Management）

#### 待完成 ⭕（全部為P0/P1）

##### 4.1 預約時段管理（P0）
- [ ] 創建bookings表
  - [ ] id（主鍵）
  - [ ] attractionId（景點ID，外鍵關聯attractions表）
  - [ ] groupId（團組ID，外鍵關聯groups表）
  - [ ] bookingDate（預約日期）
  - [ ] timeSlot（時段，如「14:30-15:30」）
  - [ ] peopleCount（預約人數）
  - [ ] status（狀態：待確認/已確認/已取消）
  - [ ] contactPerson（聯繫人）
  - [ ] contactPhone（聯繫電話）
  - [ ] notes（備註）
  - [ ] createdAt, updatedAt
- [ ] 實現預約管理API
  - [ ] bookings.create（創建預約）
  - [ ] bookings.list（查詢預約列表，支持按景點/團組/日期過濾）
  - [ ] bookings.update（更新預約狀態）
  - [ ] bookings.delete（取消預約）
  - [ ] bookings.getByAttraction（查詢某景點的所有預約）
  - [ ] bookings.getByGroup（查詢某團組的所有預約）
- [ ] 創建Bookings.tsx頁面
  - [ ] 顯示所有預約的列表視圖
  - [ ] 支持按景點/團組/日期/狀態篩選
  - [ ] 支持創建新預約
  - [ ] 支持編輯預約（修改時段、人數、狀態）
  - [ ] 支持取消預約

##### 4.2 預約衝突檢測（P0）
- [ ] 在attractions表中添加timeSlotCapacity字段（每個時段的容量限制）
- [ ] 實現預約衝突檢測API
  - [ ] bookings.checkConflict（檢查某時段是否超出容量）
  - [ ] 輸入：attractionId, bookingDate, timeSlot, peopleCount
  - [ ] 邏輯：
    1. 查詢該景點在該日期該時段的所有已確認預約
    2. 計算總預約人數
    3. 如果總人數 + 新預約人數 > 時段容量，返回衝突警告
- [ ] 在創建/編輯預約時，自動調用衝突檢測API
  - [ ] 如果有衝突，顯示紅色警告
  - [ ] 建議替代時段或替代景點

##### 4.3 預約狀態追蹤（P1）
- [ ] 在Bookings頁面添加狀態管理功能
  - [ ] 顯示每個預約的當前狀態（待確認/已確認/已取消）
  - [ ] 支持批量更新狀態
  - [ ] 支持導出預約清單（Excel/PDF）
- [ ] 在團組詳情頁添加「預約管理」Tab
  - [ ] 顯示該團組的所有預約
  - [ ] 支持快速創建預約（從行程點一鍵生成預約）

##### 4.4 學霸分享會管理（P1）
- [ ] 創建sharingEvents表
  - [ ] id（主鍵）
  - [ ] projectId（項目ID）
  - [ ] eventDate（分享會日期）
  - [ ] timeSlot（時段）
  - [ ] location（地點）
  - [ ] targetGrade（目標學段：小學/中學）
  - [ ] speakerName（分享人姓名）
  - [ ] speakerBackground（分享人背景）
  - [ ] topic（分享主題）
  - [ ] attendingGroups（參加團組ID數組，JSON格式）
  - [ ] notes（備註）
- [ ] 實現學霸分享會API
  - [ ] sharingEvents.create
  - [ ] sharingEvents.list
  - [ ] sharingEvents.update
  - [ ] sharingEvents.delete
- [ ] 創建SharingEvents.tsx頁面
  - [ ] 顯示所有分享會列表
  - [ ] 支持創建/編輯/刪除分享會
  - [ ] 支持為分享會分配參加團組

---

### 模塊五：統籌人員調度（Coordinator Scheduling）

#### 待完成 ⭕（全部為P1/P2）

##### 5.1 人員管理（P1）
- [ ] 創建coordinators表
  - [ ] id（主鍵）
  - [ ] name（姓名）
  - [ ] phone（電話）
  - [ ] email（郵箱）
  - [ ] role（角色：領隊/接機/學校對接/物資管理/應急處理）
  - [ ] skills（技能標籤，JSON數組，如「粵語」「急救」「攝影」）
  - [ ] isActive（是否在職）
  - [ ] createdAt, updatedAt
- [ ] 實現統籌人員API
  - [ ] coordinators.create
  - [ ] coordinators.list
  - [ ] coordinators.update
  - [ ] coordinators.delete
- [ ] 創建Coordinators.tsx頁面
  - [ ] 顯示所有統籌人員列表
  - [ ] 支持添加/編輯/刪除統籌人員
  - [ ] 支持設置角色和技能標籤

##### 5.2 任務分配（P1）
- [ ] 創建coordinatorTasks表
  - [ ] id（主鍵）
  - [ ] coordinatorId（統籌人員ID）
  - [ ] projectId（項目ID）
  - [ ] groupId（團組ID，可為空，表示項目級任務）
  - [ ] taskDate（任務日期）
  - [ ] startTime（開始時間）
  - [ ] endTime（結束時間）
  - [ ] taskType（任務類型：接機/送機/學校交流跟進/物資分發/酒店入住/應急處理）
  - [ ] location（任務地點）
  - [ ] description（任務描述）
  - [ ] status（狀態：待執行/進行中/已完成）
  - [ ] notes（備註）
  - [ ] createdAt, updatedAt
- [ ] 實現任務分配API
  - [ ] coordinatorTasks.create
  - [ ] coordinatorTasks.list（支持按人員/項目/團組/日期過濾）
  - [ ] coordinatorTasks.update
  - [ ] coordinatorTasks.delete
  - [ ] coordinatorTasks.checkConflict（檢測時間衝突）
- [ ] 創建CoordinatorSchedule.tsx頁面
  - [ ] 顯示所有統籌人員的任務列表
  - [ ] 支持為統籌人員分配任務
  - [ ] 支持拖拽調整任務時間
  - [ ] 自動檢測時間衝突（同一人在同一時段被分配到兩個任務）

##### 5.3 甘特圖視圖（P1）
- [ ] 安裝甘特圖庫（如react-gantt-chart或dhtmlx-gantt）
- [ ] 在CoordinatorSchedule頁面添加甘特圖視圖
  - [ ] 橫軸為時間（日期+小時）
  - [ ] 縱軸為統籌人員
  - [ ] 每個任務顯示為一個色塊
  - [ ] 支持拖拽調整任務時間
  - [ ] 支持點擊色塊查看/編輯任務詳情
  - [ ] 時間衝突的任務用紅色標記

##### 5.4 任務提醒（P2）
- [ ] 實現任務提醒功能
  - [ ] 在任務開始前1小時，向統籌人員發送通知
  - [ ] 在任務開始前1天，向統籌人員發送提醒
  - [ ] 支持自定義提醒時間
- [ ] 在通知中心顯示任務提醒
- [ ] 支持郵件/短信提醒（可選）

---

### 模塊六：學校交流管理（School Exchange Management）

#### 待完成 ⭕

##### 6.1 學校配對功能（P0）
- [ ] 創建schoolExchanges表
  - [ ] id（主鍵）
  - [ ] groupId（團組ID，外鍵關聯groups表）
  - [ ] hkSchoolId（香港學校ID，外鍵關聯schools表）
  - [ ] moSchoolId（澳門學校ID，外鍵關聯schools表，可為空）
  - [ ] hkExchangeDate（香港交流日期）
  - [ ] hkExchangeTime（香港交流時段）
  - [ ] moExchangeDate（澳門交流日期，可為空）
  - [ ] moExchangeTime（澳門交流時段，可為空）
  - [ ] status（狀態：待確認/已確認/已完成）
  - [ ] createdAt, updatedAt
- [ ] 實現學校交流API
  - [ ] schoolExchanges.create（為團組創建學校配對）
  - [ ] schoolExchanges.list（查詢所有學校交流記錄）
  - [ ] schoolExchanges.getByGroup（查詢某團組的學校交流）
  - [ ] schoolExchanges.update（更新學校交流信息）
  - [ ] schoolExchanges.delete（刪除學校交流記錄）
- [ ] 在團組詳情頁添加「學校交流」Tab
  - [ ] 顯示該團組的香港學校和澳門學校配對信息
  - [ ] 支持選擇香港學校和澳門學校（從資源庫中選擇）
  - [ ] 支持設置交流日期和時段
  - [ ] 顯示學校的聯繫人、地址、接待流程等信息

##### 6.2 交流詳情記錄（P0）
- [ ] 擴展schoolExchanges表schema
  - [ ] 添加hkContactPerson字段（香港學校聯繫人）
  - [ ] 添加hkContactPhone字段（香港學校聯繫電話）
  - [ ] 添加hkReceptionProcess字段（香港學校接待流程）
  - [ ] 添加moContactPerson字段（澳門學校聯繫人）
  - [ ] 添加moContactPhone字段（澳門學校聯繫電話）
  - [ ] 添加moReceptionProcess字段（澳門學校接待流程）
  - [ ] 添加notes字段（備註）
- [ ] 在「學校交流」Tab中添加詳情記錄UI
  - [ ] 顯示聯繫人信息（自動從schools表讀取，也可手動修改）
  - [ ] 顯示接待流程說明
  - [ ] 支持添加備註

##### 6.3 交流狀態管理（P1）
- [ ] 在「學校交流」Tab中添加狀態管理功能
  - [ ] 顯示當前狀態（待確認/已確認/已完成）
  - [ ] 支持更新狀態
  - [ ] 狀態變更時自動發送通知給相關人員
- [ ] 在項目總覽頁添加學校交流統計
  - [ ] 顯示已確認的學校交流數量
  - [ ] 顯示待確認的學校交流數量

##### 6.4 學校歷史記錄（P2）
- [ ] 在schools表中添加exchangeHistory字段（JSON數組，記錄歷次交流）
- [ ] 實現學校歷史記錄API
  - [ ] schools.getExchangeHistory（查詢某學校的歷次交流記錄）
  - [ ] 顯示交流日期、團組名稱、交流內容、評價等
- [ ] 在ResourceLibrary的學校Tab中添加歷史記錄查看功能
  - [ ] 點擊學校卡片，顯示該學校的歷次交流記錄
  - [ ] 支持添加交流評價和反饋

---

### 模塊七：現有功能優化

#### 待完成 ⭕

##### 7.1 行程時間軸優化（P0）
- [ ] 增加上午/下午時段劃分
  - [ ] 在行程點創建/編輯時，添加時段選擇器（上午/下午/晚上）
  - [ ] 在行程時間軸中，按時段分組顯示行程點
  - [ ] 優化時間軸佈局，清晰區分不同時段
- [ ] 支持從資源庫選擇景點
  - [ ] 在行程點創建/編輯時，將地點輸入框改為下拉選擇器
  - [ ] 下拉選擇器從attractions表讀取景點列表
  - [ ] 選擇景點後，自動填充地址、聯繫人等信息
  - [ ] 顯示景點的約束條件（開放時間、休館日）
  - [ ] 如果選擇的日期/時間違反約束條件，顯示警告

##### 7.2 食行卡片升級（P0）
- [ ] 創建項目級餐飲統籌視圖
  - [ ] 創建ProjectMeals.tsx頁面
  - [ ] 顯示項目下所有團組的每日餐飲安排
  - [ ] 佈局：行=團組，列=日期，單元格=早/午/晚餐
  - [ ] 每個餐飲單元格顯示餐廳名稱、人數
  - [ ] 用顏色深淺表示餐廳負載程度（淺色=低負載，深色=高負載）
  - [ ] 點擊單元格可編輯該團組該餐次的餐飲安排
- [ ] 實現餐廳負載計算
  - [ ] 計算每個餐廳在每個餐次接待的總人數
  - [ ] 如果總人數超過餐廳容量，用紅色標記
  - [ ] 在項目總覽頁顯示餐飲衝突警告

##### 7.3 批量添加行程點（P0）
- [ ] 在團組詳情的行程Tab中添加「批量添加」按鈕
- [ ] 創建批量添加對話框
  - [ ] 選擇日期範圍（起始日期 - 結束日期）
  - [ ] 選擇時段（上午/下午/晚上）
  - [ ] 選擇景點（支持多選）
  - [ ] 設置每個景點的時間和描述
  - [ ] 預覽批量添加的行程點列表
- [ ] 實現批量創建API
  - [ ] itineraries.batchCreate
  - [ ] 輸入：groupId, 行程點數組
  - [ ] 邏輯：批量插入itineraries表
- [ ] 點擊「確認添加」後，調用批量創建API
- [ ] 添加成功後，刷新行程時間軸

##### 7.4 行程設計器增強（P1）
- [ ] 增加拖拽排程功能
  - [ ] 支持拖拽行程點調整順序
  - [ ] 支持拖拽行程點到不同日期
  - [ ] 拖拽時顯示目標位置的時間
  - [ ] 拖拽完成後自動更新行程點的日期和時間
- [ ] 增加衝突提示
  - [ ] 在行程設計器中，實時檢測資源衝突
  - [ ] 如果某個行程點與其他團組衝突，用紅色標記
  - [ ] 點擊衝突標記，顯示衝突詳情（哪些團組在同一時段使用同一資源）
- [ ] 增加模板套用
  - [ ] 在行程設計器中添加「套用模板」按鈕
  - [ ] 選擇模板後，自動生成行程點
  - [ ] 支持拖拽調整套用後的行程

##### 7.5 導出功能增強（P1）
- [ ] 增加按項目導出完整統籌文檔
  - [ ] 創建項目導出API（projects.export）
  - [ ] 導出內容包括：
    - 項目基本信息
    - 所有團組的基本信息
    - 多團組日曆矩陣
    - 所有團組的詳細行程
    - 所有團組的餐飲安排
    - 所有團組的成員名單
    - 學校交流安排
    - 預約清單
    - 統籌人員任務分配
  - [ ] 支持導出為PDF和Excel兩種格式
- [ ] 在項目詳情頁添加「導出項目」按鈕
- [ ] 優化導出的排版和樣式

---

## 🚀 實施順序建議

根據優先級和依賴關係，建議按以下順序實施：

### 第一批（立即開始）
1. **模塊七 - 批量添加行程點（P0）**
   - 提升日常操作效率
   - 獨立功能，無依賴
   - 預計工時：4小時

2. **模塊二 - 景點庫完善（P0）**
   - 添加開放時間、休館日等字段
   - 實現場館約束規則檢測
   - 為後續功能提供數據基礎
   - 預計工時：8小時

3. **模塊七 - 行程時間軸優化（P0）**
   - 增加時段劃分
   - 支持從資源庫選擇景點
   - 依賴景點庫完善
   - 預計工時：6小時

### 第二批（緊接著）
4. **模塊三- 模板套用功能（P0）**
   - 在團組創建頁面添加模板選擇
   - 實現自動生成行程點
   - 大幅提升創建效率
   - 預計工時：8小時

5. **模塊二 - 餐廳庫完善（P0）**
   - 添加菜系、價格區間等字段
   - 實現餐廳容量衝突檢測
   - 預計工時：6小時

6. **模塊七 - 食行卡片升級（P0）**
   - 創建項目級餐飲統籌視圖
   - 依賴餐廳庫完善
   - 預計工時：8小時

### 第三批（核心功能）
7. **模塊二 - 學校庫完善（P0）**
   - 添加聯繫人、接待流程等字段
   - 為學校交流管理提供數據基礎
   - 預計工時：6小時

8. **模塊六 - 學校交流管理（P0）**
   - 實現學校配對功能
   - 實現交流詳情記錄
   - 依賴學校庫完善
   - 預計工時：10小時

9. **模塊四 - 預約管理（P0）**
   - 實現預約時段管理
   - 實現預約衝突檢測
   - 預計工時：12小時

### 第四批（增強功能）
10. **模塊五 - 統籌人員調度（P1）**
    - 實現人員管理
    - 實現任務分配
    - 實現甘特圖視圖
    - 預計工時：16小時

11. **模塊七 - 行程設計器增強（P1）**
    - 增加拖拽排程
    - 增加衝突提示
    - 增加模板套用
    - 預計工時：10小時

12. **模塊七 - 導出功能增強（P1）**
    - 增加按項目導出完整統籌文檔
    - 預計工時：8小時

### 第五批（可選功能）
13. **模塊二 - 資源使用統計（P2）**
14. **模塊三 - 模板版本管理（P2）**
15. **模塊五 - 任務提醒（P2）**
16. **模塊六 - 學校歷史記錄（P2）**

---

## 📊 總工時估算

- **P0功能**：約68小時
- **P1功能**：約34小時
- **P2功能**：約16小時
- **總計**：約118小時

---

## ✅ 驗收標準

每個功能完成後，必須滿足以下標準才能標記為完成：

1. **功能完整性**：實現報告中描述的所有核心功能
2. **數據正確性**：數據庫操作正確，無數據丟失或錯誤
3. **UI/UX質量**：界面美觀，交互流暢，符合設計規範
4. **衝突檢測準確**：資源衝突檢測邏輯正確，無漏報或誤報
5. **性能要求**：頁面加載時間 < 2秒，操作響應時間 < 500ms
6. **測試覆蓋**：關鍵功能有對應的測試用例
7. **文檔完整**：代碼有必要的註釋，複雜邏輯有說明文檔

---

*本清單最後更新：2026年2月22日*
*基於文檔：《EduConnect 平台改造方向與功能規劃報告》*
