# Education Connect - 任務清單

## 本次更新完成的功能 ✅

### 景點資源管理系統
- [x] 創建attractions數據表（包含可用時間段字段）
- [x] 實現景點CRUD API（create, list, update, delete）
- [x] 創建景點管理UI頁面（Attractions.tsx）
- [x] 支持可用時間段配置（按星期設置開放時間）
- [x] 支持全天可用選項
- [x] 景點列表展示（顯示時間段數量和詳情）

### 行程點景點選擇器
- [x] 在行程點創建界面添加景點下拉選擇器
- [x] 提供「手動輸入地點」選項
- [x] 選擇景點後自動填充地點名稱
- [x] 地點名稱輸入框根據選擇狀態自動啟用/禁用

### 時間衝突檢測系統
- [x] 實現衝突檢測邏輯（checkConflict函數）
- [x] 檢查景點在當天是否開放
- [x] 檢查行程時間是否在景點開放時間內
- [x] 在日期、開始時間、結束時間輸入框添加onChange事件
- [x] 顯示黃色警告框提示衝突信息
- [x] 支持全天可用景點（無衝突）

### 批量導入優化
- [x] 修復批量導入響應處理邏輯
- [x] 添加數據驗證（檢查data.results是否存在）
- [x] 顯示詳細的導入結果（成功數/總數）
- [x] 區分完全成功和部分成功的情況
- [x] 添加console.log用於調試
- [x] 修復身份映射問題（添加簡體中文支持）
- [x] 添加「領隊/领队」角色映射（映射為staff）
- [x] 測試通過：成功導入51條記錄

## 已有功能（之前完成）

### 核心系統
- [x] 用戶認證系統（Manus OAuth）
- [x] 數據庫連接（MySQL雲端）
- [x] 權限管理（管理員/編輯者/查看者）

### 團組管理
- [x] 團組CRUD操作
- [x] 團組狀態跟蹤（準備中/進行中/已完成/已取消）
- [x] 團組類型分類（小學/中學/VIP）
- [x] 團組統計數據展示

### 成員管理
- [x] 成員CRUD操作
- [x] 自定義字段支持（JSON存儲）
- [x] 批量導入（Excel）
- [x] 批量導出
- [x] 批量刪除（含全選功能）

### 行程管理
- [x] 行程點CRUD操作
- [x] 24小時時間軸視圖
- [x] 行程設計器（週視圖）
- [x] 日曆視圖
- [x] 三個視圖數據同步

### 通知系統
- [x] 通知數據結構（4種類型）
- [x] 通知中心UI
- [x] 未讀通知徽章
- [x] 自動提醒（出發前3天和1天）
- [x] 通知服務自動運行

### 文件管理
- [x] 文件上傳（S3存儲）
- [x] 文件下載和預覽
- [x] 文件分類篩選

### 食行卡片管理
- [x] 每日食行卡片CRUD
- [x] 餐飲和住宿信息管理
- [x] 卡片複製功能

## 待優化功能

### 團組類型優化
- [ ] 將團組類型從單選改為多選標籤
- [ ] 支持自定義標籤添加
- [ ] 更新數據庫schema（type字段改為JSON數組）

### 統計數據修正
- [ ] 修正儀表板「參訪地點」統計邏輯（目前顯示28，應該是1）
- [ ] 確保統計數據準確反映實際數據

## 測試狀態
- ✅ TypeScript編譯無錯誤
- ✅ 開發服務器運行正常
- ✅ 批量導入功能測試通過（51條記錄全部成功）
- ✅ 景點資源管理功能測試通過
- ✅ 行程點景點選擇器測試通過
- ✅ 時間衝突檢測功能測試通過

## 系統信息
- 項目路徑：/home/ubuntu/edu-connect
- 開發服務器：https://3000-isya7e8un7jp0nvtmp1bh-42e8320a.sg1.manus.computer
- 數據庫：MySQL雲端
- 存儲：S3

## 用戶反饋改進 🔄

### 景點管理系統改進（根據用戶反饋）
- [x] 將「可用時間段」改為「不可用時間段」（更方便配置）
- [x] 添加「可容納人數」字段（用於檢查團組人數是否超出容量）
- [x] 添加「地點」字段（待集成Google Maps地址自動補全）
- [x] 在行程點創建界面添加景點選擇器（下拉菜單）
- [ ] 實現衝突檢測（檢查行程時間是否在景點不可用時間內）
- [ ] 實現容量檢查（檢查團組人數是否超出景點容量）

### 後續優化建議
- [ ] Google Maps地址自動補全功能（集成到景點創建表單）
- [ ] 衝突檢測邏輯（根據不可用時間檢查衝突）
- [ ] 容量檢查功能（檢查團組人數是否超出景點容量）

## 新用戶需求 (2026-02-12) 🎯

### 數據清理
- [x] 保留第一個團組（江蘇六天五夜粵港團）
- [x] 保留一個通知
- [x] 保留一個管理員
- [x] 刪除其他測試生成的團組和數據

### 通知系統改進
- [x] 通知界面添加「全部已讀」按鈕

### 儀表板優化
- [ ] 添加「近期關注事項」板塊
- [ ] 最近團組列表支持點擊跳轉到團組行程詳情界面

### 團組檔案管理
- [ ] 實現團組行程檔案一鍵導出功能（PDF或Excel）

### 成員管理改進
- [ ] 移除預設字段（性別、聯系電話、身份證號）
- [ ] 改為動態字段系統：直接使用Excel表頭作為字段名
- [ ] 支持簡體中文、繁體中文、英文字段名
- [ ] 空值不顯示，避免顯示"空值"文本

### 資源管理擴展
- [ ] 新增酒店信息管理（名稱、地址、聯系方式、房間數等）
- [ ] 新增車輛信息管理（車牌號、車型、座位數、司機信息等）
- [ ] 新增導遊信息管理（姓名、聯系方式、語言能力、證書編號等）
- [ ] 新增安保人員信息管理（姓名、聯系方式、證書編號等）
- [ ] 在食行卡片的車輛安排中關聯車輛信息（下拉可選）
- [ ] 在食行卡片的餐飲安排中關聯酒店信息（下拉可選）

### UI調整
- [x] 調整導航欄順序：將通知中心移到統計報表之上
